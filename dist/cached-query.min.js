(()=>{"use strict";var n={d:(e,o)=>{for(var r in o)n.o(o,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:o[r]})},o:(n,e)=>Object.prototype.hasOwnProperty.call(n,e),r:n=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})}},e={};n.r(e),n.d(e,{clearQueries:()=>r,cquery_cache:()=>o,invalidateQuery:()=>i,mockQuery:()=>t,preparedQuery:()=>a,replaceQuery:()=>l,useQuery:()=>s});const o={};function r(){for(var n in o)delete o[n]}function a(n,e,r={},a={}){if(n in o){let r=o[n];return void(r.url!==e&&console.warn(`ignore the url: a query already exists with different url ${r.url}, you try to prepare for ${e}`))}let i={callbacks:[],data:null,error:null,key:n,isLoading:!1,response:null,mock:!1,url:e,request_options:r,invalidationStop:null,invalidationInterval:null,invalidationCounter:0,postponeInvalidation:a.postponeInvalidation||!0};"mock"in a&&f(i,a),"interval"in a&&d(i,a.interval),o[n]=i}function i(n){c(n);const e=o[n];e.invalidationCounter+=1,null===e.data&&!1===e.isLoading||u(e,!0)}function t(n,e,r=!1,a=null,i=null){c(n);const t=o[n];t.mock=!0,t.data=e,t.isLoading=r,t.error=a,t.response=i}function l(n,e,r={},a={}){c(n);let i=o[n];i.url=e,i.request_options=r,"mock"in a?f(i,a):function(n){n.mock=!1,n.data=null,n.isLoading=!1,n.error=null,n.response=null}(i),"interval"in a?d(i,a.interval):p(i)}function s(n,e){c(n);const r=o[n];null===r.data&&!1===r.isLoading&&null===r.error?(u(r),r.callbacks.push(e),e(r.data,r.isLoading,r.error,r.response)):(r.callbacks.push(e),e(r.data,r.isLoading,r.error,r.response))}function c(n){if(!(n in o))throw`The query '${n}' does not exists - prepared queries : [${Object.keys(o)}]`}function u(n,e=!1){if(!0!==n.mock){n.data=null,n.isLoading=!0,n.response=null,n.error=null;for(const e in n.callbacks)n.callbacks[e](n.data,n.isLoading,n.error,n.response);fetch(n.url,n.request_options).then((e=>(n.response=e,e.json()))).then((o=>{if(!0===e&&n.invalidationCounter>0&&(n.invalidationCounter-=1),0===n.invalidationCounter||!1===n.postponeInvalidation){n.isLoading=!1,n.data=o,n.error=null;for(const e in n.callbacks)n.callbacks[e](n.data,n.isLoading,n.error,n.response)}})).catch((e=>{n.isLoading=!1,n.data=null,n.error=e;for(const e in n.callbacks)n.callbacks[e](n.data,n.isLoading,n.error,n.response)}))}else for(const e in n.callbacks)n.callbacks[e](n.data,n.isLoading,n.error,n.response)}function d(n,e){p(n),n.invalidationStop=setTimeout((()=>d(n,e)),1e3*e),u(n)}function p(n){n.invalidationStop&&clearTimeout(n.invalidationStop)}function f(n,e){n.mock=!0,n.data=e.mock.data,n.isLoading=e.mock.isLoading,n.error=e.mock.error,n.response=e.mock.response}var v=window;for(var k in e)v[k]=e[k];e.__esModule&&Object.defineProperty(v,"__esModule",{value:!0})})();