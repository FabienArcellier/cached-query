(()=>{"use strict";var o={d:(e,r)=>{for(var i in r)o.o(r,i)&&!o.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:r[i]})},o:(o,e)=>Object.prototype.hasOwnProperty.call(o,e),r:o=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(o,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(o,"__esModule",{value:!0})}},e={};o.r(e),o.d(e,{cquery_cache:()=>r,invalidateQuery:()=>t,mockQuery:()=>s,preparedQuery:()=>i,replaceQuery:()=>n,useQuery:()=>a});const r={};function i(o,e,i={},n={}){if(o in r){let i=r[o];return void(i.url!==e&&console.warn(`ignore the url: a query already exists with different url ${i.url}, you try to prepare for ${e}`))}let a={callbacks:[],data:void 0,error:void 0,key:o,isLoading:!1,response:void 0,mock:!1,url:e,request_options:i,invalidationStop:void 0,invalidationInterval:void 0,invalidationCounter:0,postponeInvalidation:n.postponeInvalidation||!0};"mock"in n&&(a.mock=!0,a.data=n.mock.data,a.isLoading=n.mock.isLoading,a.error=n.mock.error,a.response=n.mock.response),"interval"in n&&l(a,n.interval),r[o]=a}function n(o,e,i={}){d(o);let n=r[o];n.url=e,n.request_options=i}function a(o,e){d(o);const i=r[o];void 0===i.data&&!1===i.isLoading&&void 0===i.error?(c(i),i.callbacks.push(e),e(i.data,i.isLoading,i.error,i.response)):(i.callbacks.push(e),e(i.data,i.isLoading,i.error,i.response))}function t(o){d(o);const e=r[o];e.invalidationCounter+=1,void 0===e.data&&!1===e.isLoading||c(e,!0)}function s(o,e,i=!1,n,a){d(o);const t=r[o];t.mock=!0,t.data=e,t.isLoading=i,t.error=n,t.response=a}function d(o){if(!(o in r))throw`The query '${o}' does not exists - prepared queries : [${Object.keys(r)}]`}function c(o,e=!1){if(!0!==o.mock){o.data=void 0,o.isLoading=!0,o.response=void 0,o.error=void 0;for(const e in o.callbacks)o.callbacks[e](o.data,o.isLoading,o.error,o.response);fetch(o.url,o.request_options).then((e=>(o.response=e,e.json()))).then((r=>{if(!0===e&&o.invalidationCounter>0&&(o.invalidationCounter-=1),0===o.invalidationCounter||!1===o.postponeInvalidation){o.isLoading=!1,o.data=r,o.error=void 0;for(const e in o.callbacks)o.callbacks[e](o.data,o.isLoading,o.error,o.response)}})).catch((e=>{o.isLoading=!1,o.data=void 0,o.error=e;for(const e in o.callbacks)o.callbacks[e](o.data,o.isLoading,o.error,o.response)}))}else for(const e in o.callbacks)o.callbacks[e](o.data,o.isLoading,o.error,o.response)}function l(o,e){o.invalidationStop=setTimeout((()=>l(o,e)),1e3*e),c(o)}var u=window;for(var p in e)u[p]=e[p];e.__esModule&&Object.defineProperty(u,"__esModule",{value:!0})})();