(()=>{"use strict";var n={d:(o,e)=>{for(var i in e)n.o(e,i)&&!n.o(o,i)&&Object.defineProperty(o,i,{enumerable:!0,get:e[i]})},o:(n,o)=>Object.prototype.hasOwnProperty.call(n,o),r:n=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})}},o={};n.r(o),n.d(o,{clearQueries:()=>i,cquery_cache:()=>e,delayedQuery:()=>m,fetchJsonEngine:()=>t,invalidateQuery:()=>r,invokeSubscriptions:()=>l,mockEngine:()=>c,mockQuery:()=>s,preparedQuery:()=>a,replaceQuery:()=>u,replaceQueryDefaultEngine:()=>d,resetContext:()=>k,useQuery:()=>p});const e={};function i(){for(var n in e)delete e[n]}function a(n,o,i={},a={}){if(n in e){let i=e[n];return void(i.url!==o&&console.warn(`ignore the url: a query already exists with different url ${i.url}, you try to prepare for ${o}`))}let r={callbacks:[],data:null,error:null,key:n,isLoading:!1,response:null,mock:!1,url:o,request_options:i,invalidationStop:null,invalidationInterval:null,invalidationCounter:0,postponeInvalidation:a.postponeInvalidation||!0,engine:a.engine||null,delayedLoading:!0};"delayedLoading"in a&&(r.delayedLoading=a.delayedLoading),"mock"in a&&null!==a.mock&&b(r,a),"interval"in a&&null!==a.interval&&v(r,a.interval),e[n]=r}function r(n){g(n);const o=e[n];null===o.data&&!0===o.isLoading||y(o,!0)}function l(n,o,e,i){if(n.invalidationCounter-=1,0===n.invalidationCounter||!1===n.postponeInvalidation){n.isLoading=!1,n.data=o,n.error=e,n.response=i;for(const o in n.callbacks)n.callbacks[o](n.data,n.isLoading,n.error,n.response)}}function t(n){let o=null;fetch(n.url,n.request_options).then((n=>(o=n,n.json()))).then((e=>{l(n,e,null,o)})).catch((e=>{l(n,null,e,o)}))}function c(n){n.isLoading=n.mockIsLoading,l(n,n.mockData,n.mockError,n.mockResponse)}function s(n,o,i=!1,a=null,r=null){g(n);const l=e[n];l.mock=!0,l.mockData=o,l.mockIsLoading=i,l.mockError=a,l.mockResponse=r}function u(n,o,i={},a={}){g(n);let r=e[n];r.url=o,r.request_options=i,r.engine=a.engine||f,"mock"in a?b(r,a):function(n){n.mock=!1,n.mockData=null,n.mockIsLoading=null,n.mockError=null,n.mockResponse=null}(r),"interval"in a?v(r,a.interval):L(r)}function d(n){f=n}function k(){f=t,i()}function p(n,o){g(n);const i=e[n];null===i.data&&!1===i.isLoading&&null===i.error?(i.callbacks.push(o),y(i)):(i.callbacks.push(o),o(i.data,i.isLoading,i.error,i.response))}function m(n,o){g(n);const i=e[n];null===i.data&&!1===i.isLoading&&null===i.error?i.callbacks.push(o):(i.callbacks.push(o),o(i.data,i.isLoading,i.error,i.response))}let f=t;function g(n){if(!(n in e))throw`The query '${n}' does not exists - prepared queries : [${Object.keys(e)}]`}function y(n,o=!1){if(n.invalidationCounter+=1,!0!==n.mock){n.data=null,n.isLoading=!0,n.response=null,n.error=null;for(const o in n.callbacks)n.callbacks[o](n.data,n.isLoading,n.error,n.response)}if(!0===n.mock&&!0===n.mockIsLoading){n.isLoading=n.mockIsLoading;for(const o in n.callbacks)n.callbacks[o](n.mockData,n.mockIsLoading,n.mockError,n.mockResponse)}else!0===n.mock?c(n):null!==n.engine?n.engine(n):f(n)}function v(n,o){L(n),n.invalidationStop=setTimeout((()=>v(n,o)),1e3*o),!1!==n.isLoading&&!1!==n.delayedLoading||y(n)}function L(n){n.invalidationStop&&clearTimeout(n.invalidationStop)}function b(n,o){n.mock=!0,n.mockData=o.mock.data,n.mockIsLoading=o.mock.isLoading,n.mockError=o.mock.error,n.mockResponse=o.mock.response}var h=window;for(var I in o)h[I]=o[I];o.__esModule&&Object.defineProperty(h,"__esModule",{value:!0})})();